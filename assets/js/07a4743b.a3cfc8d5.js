"use strict";(globalThis.webpackChunkphysical_ai_and_humanoid_robots=globalThis.webpackChunkphysical_ai_and_humanoid_robots||[]).push([[5933],{4150:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>d,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"module2/rclpy-python-agents","title":"rclpy + Python Agents in ROS 2","description":"Learn to develop ROS 2 nodes using rclpy, the Python client library, transforming Python scripts into robot agents for modular and intelligent robotic behaviors.","source":"@site/docs/module2/02-rclpy-python-agents.md","sourceDirName":"module2","slug":"/module2/rclpy-python-agents","permalink":"/hackathon-humanoid-robotics-textbook/docs/module2/rclpy-python-agents","draft":false,"unlisted":false,"editUrl":"https://github.com/Umm-e-Hani02/hackathon-humanoid-robotics-textbook/tree/main/docs/module2/02-rclpy-python-agents.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"rclpy + Python Agents in ROS 2","description":"Learn to develop ROS 2 nodes using rclpy, the Python client library, transforming Python scripts into robot agents for modular and intelligent robotic behaviors.","keywords":["rclpy","ROS 2 Python","Python Agents","Robot Programming","Publisher","Subscriber","ROS 2 Nodes"]},"sidebar":"tutorialSidebar","previous":{"title":"ROS 2 Basics - Nodes, Topics, and Services","permalink":"/hackathon-humanoid-robotics-textbook/docs/module2/ros2-basics"},"next":{"title":"URDF for Humanoids - Describing Robot Anatomy","permalink":"/hackathon-humanoid-robotics-textbook/docs/module2/urdf-for-humanoids"}}');var i=r(4848),o=r(8453);const t={sidebar_position:2,title:"rclpy + Python Agents in ROS 2",description:"Learn to develop ROS 2 nodes using rclpy, the Python client library, transforming Python scripts into robot agents for modular and intelligent robotic behaviors.",keywords:["rclpy","ROS 2 Python","Python Agents","Robot Programming","Publisher","Subscriber","ROS 2 Nodes"]},l="rclpy + Python Agents in ROS 2",a={},c=[{value:"Introduction to <code>rclpy</code>",id:"introduction-to-rclpy",level:2},{value:"Key Features of <code>rclpy</code>",id:"key-features-of-rclpy",level:3},{value:"Creating a Simple ROS 2 Python Node",id:"creating-a-simple-ros-2-python-node",level:2},{value:"1. Setup Your ROS 2 Workspace",id:"1-setup-your-ros-2-workspace",level:3},{value:"2. The Publisher Node (<code>simple_publisher.py</code>)",id:"2-the-publisher-node-simple_publisherpy",level:3},{value:"3. The Subscriber Node (<code>simple_subscriber.py</code>)",id:"3-the-subscriber-node-simple_subscriberpy",level:3},{value:"4. Update <code>setup.py</code>",id:"4-update-setuppy",level:3},{value:"5. Build and Run",id:"5-build-and-run",level:3},{value:"Python Agents and Behaviors",id:"python-agents-and-behaviors",level:2}];function p(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"rclpy--python-agents-in-ros-2",children:"rclpy + Python Agents in ROS 2"})}),"\n",(0,i.jsxs)(n.p,{children:["While ROS 2 supports multiple programming languages, Python (via ",(0,i.jsx)(n.code,{children:"rclpy"}),") is often a preferred choice for developing robot applications due to its readability, extensive libraries, and rapid prototyping capabilities. This lesson will introduce you to ",(0,i.jsx)(n.code,{children:"rclpy"})," and how to create simple Python-based ROS 2 nodes, effectively turning your Python scripts into robot agents."]}),"\n",(0,i.jsxs)(n.h2,{id:"introduction-to-rclpy",children:["Introduction to ",(0,i.jsx)(n.code,{children:"rclpy"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"rclpy"})," is the Python client library for ROS 2. It provides a straightforward API to interact with the core ROS 2 concepts we discussed: creating nodes, publishing to topics, subscribing to topics, and implementing services."]}),"\n",(0,i.jsxs)(n.h3,{id:"key-features-of-rclpy",children:["Key Features of ",(0,i.jsx)(n.code,{children:"rclpy"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Ease of Use"}),": Python's syntax makes it easy to quickly write and test ROS 2 nodes."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Integration with Python Ecosystem"}),": Leverage powerful Python libraries for AI, data processing, computer vision, etc."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Asynchronous Programming"}),": ",(0,i.jsx)(n.code,{children:"rclpy"})," supports Python's ",(0,i.jsx)(n.code,{children:"asyncio"})," for non-blocking operations, which is crucial for responsive robot behavior."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"creating-a-simple-ros-2-python-node",children:"Creating a Simple ROS 2 Python Node"}),"\n",(0,i.jsx)(n.p,{children:"Let's create a basic publisher and subscriber node in Python."}),"\n",(0,i.jsx)(n.h3,{id:"1-setup-your-ros-2-workspace",children:"1. Setup Your ROS 2 Workspace"}),"\n",(0,i.jsxs)(n.p,{children:["Ensure you have a ROS 2 workspace (e.g., ",(0,i.jsx)(n.code,{children:"ros2_ws"}),") set up and sourced. If not, follow the official ROS 2 installation and workspace tutorial."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Example: Create a new ROS 2 package\r\ncd ~/ros2_ws/src\r\nros2 pkg create --build-type ament_python my_python_pkg\r\ncd my_python_pkg\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"2-the-publisher-node-simple_publisherpy",children:["2. The Publisher Node (",(0,i.jsx)(n.code,{children:"simple_publisher.py"}),")"]}),"\n",(0,i.jsx)(n.p,{children:"This node will continuously publish a string message to a topic."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# ~/ros2_ws/src/my_python_pkg/my_python_pkg/simple_publisher.py\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String # Standard message type for strings\r\n\r\nclass SimplePublisher(Node):\r\n    def __init__(self):\r\n        super().__init__('simple_publisher_node') # Node name\r\n        self.publisher_ = self.create_publisher(String, 'my_topic', 10) # Topic name, QoS profile\r\n        timer_period = 0.5  # seconds\r\n        self.timer = self.create_timer(timer_period, self.timer_callback)\r\n        self.i = 0\r\n\r\n    def timer_callback(self):\r\n        msg = String()\r\n        msg.data = f'Hello ROS 2! Count: {self.i}'\r\n        self.publisher_.publish(msg)\r\n        self.get_logger().info(f'Publishing: \"{msg.data}\"') # Log to console\r\n        self.i += 1\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args) # Initialize ROS 2\r\n    simple_publisher = SimplePublisher()\r\n    rclpy.spin(simple_publisher) # Keep node alive until Ctrl+C\r\n    simple_publisher.destroy_node()\r\n    rclpy.shutdown() # Shutdown ROS 2\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"3-the-subscriber-node-simple_subscriberpy",children:["3. The Subscriber Node (",(0,i.jsx)(n.code,{children:"simple_subscriber.py"}),")"]}),"\n",(0,i.jsxs)(n.p,{children:["This node will listen to the topic ",(0,i.jsx)(n.code,{children:"my_topic"})," and print any messages it receives."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# ~/ros2_ws/src/my_python_pkg/my_python_pkg/simple_subscriber.py\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\nclass SimpleSubscriber(Node):\r\n    def __init__(self):\r\n        super().__init__('simple_subscriber_node')\r\n        self.subscription = self.create_subscription(\r\n            String,\r\n            'my_topic', # Must match publisher's topic name\r\n            self.listener_callback,\r\n            10) # QoS profile\r\n        self.subscription # prevent unused variable warning\r\n\r\n    def listener_callback(self, msg):\r\n        self.get_logger().info(f'I heard: \"{msg.data}\"')\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    simple_subscriber = SimpleSubscriber()\r\n    rclpy.spin(simple_subscriber)\r\n    simple_subscriber.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"4-update-setuppy",children:["4. Update ",(0,i.jsx)(n.code,{children:"setup.py"})]}),"\n",(0,i.jsxs)(n.p,{children:["For ROS 2 to find your Python nodes, you need to declare them in ",(0,i.jsx)(n.code,{children:"setup.py"})," within your package."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# ~/ros2_ws/src/my_python_pkg/setup.py\r\n\r\nfrom setuptools import find_packages, setup\r\n\r\npackage_name = 'my_python_pkg'\r\n\r\nsetup(\r\n    name=package_name,\r\n    version='0.0.0',\r\n    packages=find_packages(exclude=['test']),\r\n    data_files=[\r\n        ('share/' + package_name, ['package.xml']),\r\n        ('share/' + package_name + '/resource', ['resource/' + package_name]),\r\n    ],\r\n    install_requires=['setuptools'],\r\n    zip_safe=True,\r\n    maintainer='your_name',\r\n    maintainer_email='your_email@example.com',\r\n    description='TODO: Package description',\r\n    license='TODO: License declaration',\r\n    tests_require=['pytest'],\r\n    entry_points={\r\n        'console_scripts': [\r\n            'simple_publisher = my_python_pkg.simple_publisher:main',\r\n            'simple_subscriber = my_python_pkg.simple_subscriber:main',\r\n        ],\r\n    },\r\n)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"5-build-and-run",children:"5. Build and Run"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# From your workspace root (~/ros2_ws)\r\ncolcon build --packages-select my_python_pkg\r\nsource install/setup.bash # Source your workspace\r\n\r\n# Run the publisher in one terminal\r\nros2 run my_python_pkg simple_publisher\r\n\r\n# Run the subscriber in another terminal\r\nros2 run my_python_pkg simple_subscriber\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You should see the subscriber receiving and printing the messages published by the publisher. This demonstrates the fundamental publisher-subscriber communication using ",(0,i.jsx)(n.code,{children:"rclpy"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"python-agents-and-behaviors",children:"Python Agents and Behaviors"}),"\n",(0,i.jsxs)(n.p,{children:["The nodes you create in ",(0,i.jsx)(n.code,{children:"rclpy"}),' act as "agents" within your robot system. Each agent can embody specific behaviors or functionalities:']}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Perception Agents"}),": Nodes that process sensor data (e.g., an object detection agent, a facial recognition agent)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Control Agents"}),": Nodes that send commands to actuators (e.g., a locomotion agent, a manipulation agent)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Decision-Making Agents"}),": Nodes that implement higher-level AI logic (e.g., a navigation agent, a task planning agent)."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"By combining these specialized Python agents and letting them communicate via ROS 2 topics and services, you can build sophisticated and intelligent robot behaviors."}),"\n",(0,i.jsx)(n.p,{children:"In the next lesson, we will explore how to represent the physical structure of humanoid robots using URDF (Unified Robot Description Format) files, which are essential for simulation and control."})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>l});var s=r(6540);const i={},o=s.createContext(i);function t(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);